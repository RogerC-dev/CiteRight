<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³•æºæ¢æ¸¬å™¨æ“´å……å¥—ä»¶é™¤éŒ¯æ¸¬è©¦</title>
    <style>
        body { font-family: "Microsoft JhengHei", Arial, sans-serif; padding: 20px; }
        .test-case { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>ğŸ” æ³•æºæ¢æ¸¬å™¨æ“´å……å¥—ä»¶é™¤éŒ¯æ¸¬è©¦</h1>

    <div class="status" id="status">
        <h3>æ“´å……å¥—ä»¶ç‹€æ…‹ï¼šæª¢æŸ¥ä¸­...</h3>
    </div>

    <h2>æ¸¬è©¦æ¡ˆä¾‹ï¼ˆæ“´å……å¥—ä»¶è¼‰å…¥å¾Œæ‡‰è®Šæˆè—è‰²ï¼‰ï¼š</h2>

    <div class="test-case">
        <h3>åŸºæœ¬æ³•é™¢æ¡ˆä¾‹ï¼š</h3>
        <p>æœ€é«˜æ³•é™¢æ¡ˆä¾‹ï¼š<strong>110å¹´åº¦å°ä¸Šå­—ç¬¬3214è™Ÿ</strong></p>
        <p>é«˜ç­‰æ³•é™¢æ¡ˆä¾‹ï¼š<strong>109å¹´åº¦ä¸Šå­—ç¬¬1196è™Ÿ</strong></p>
    </div>

    <div class="test-case">
        <h3>æ†²æ³•ç›¸é—œæ¡ˆä¾‹ï¼š</h3>
        <p>æ†²æ³•æ³•åº­åˆ¤æ±ºï¼š<strong>111å¹´æ†²åˆ¤å­—ç¬¬13è™Ÿ</strong></p>
        <p>å¤§æ³•å®˜è§£é‡‹ï¼š<strong>é‡‹å­—ç¬¬748è™Ÿ</strong></p>
    </div>

    <div class="test-case">
        <h3>ä¼ºæœå™¨é€£ç·šæ¸¬è©¦ï¼š</h3>
        <p>ä¼ºæœå™¨ç‹€æ…‹ï¼š<span id="server-status">æª¢æŸ¥ä¸­...</span></p>
        <p>è³‡æ–™åº«ç‹€æ…‹ï¼š<span id="db-status">æª¢æŸ¥ä¸­...</span></p>
    </div>

    <script>
        // æª¢æŸ¥æ“´å……å¥—ä»¶ç‹€æ…‹
        setTimeout(() => {
            const links = document.querySelectorAll('.citeright-link');
            const statusDiv = document.getElementById('status');

            if (links.length > 0) {
                statusDiv.className = 'status success';
                statusDiv.innerHTML = '<h3>âœ… æ“´å……å¥—ä»¶ç‹€æ…‹ï¼šæ­£å¸¸é‹ä½œ</h3><p>æ‰¾åˆ° ' + links.length + ' å€‹æ¡ˆè™Ÿä¸¦æ¨™ç¤ºç‚ºè—è‰²</p>';
            } else {
                statusDiv.className = 'status error';
                statusDiv.innerHTML = '<h3>âŒ æ“´å……å¥—ä»¶ç‹€æ…‹ï¼šæœªæ­£å¸¸é‹ä½œ</h3><p>æœªæ‰¾åˆ°æ¨™ç¤ºçš„æ¡ˆè™Ÿã€‚è«‹æª¢æŸ¥æ§åˆ¶å°éŒ¯èª¤è¨Šæ¯ï¼ˆæŒ‰ F12ï¼‰</p>';
            }
        }, 2000);

        // æª¢æŸ¥ä¼ºæœå™¨é€£ç·š
        fetch('http://localhost:3002/health')
            .then(response => response.json())
            .then(data => {
                document.getElementById('server-status').innerHTML = 'âœ… ä¼ºæœå™¨é‹è¡Œä¸­ï¼ˆport 3002ï¼‰';
                return fetch('http://localhost:3002/api/stats');
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('db-status').innerHTML = 'âœ… è³‡æ–™åº«å·²é€£æ¥ï¼Œå…±æœ‰ ' + (data.totalCases || '0') + ' å€‹æ¡ˆä¾‹';
            })
            .catch(error => {
                document.getElementById('server-status').innerHTML = 'âŒ ä¼ºæœå™¨ç„¡å›æ‡‰';
                document.getElementById('db-status').innerHTML = 'âŒ ç„¡æ³•é€£æ¥è³‡æ–™åº«';
            });
    </script>
</body>
</html>
