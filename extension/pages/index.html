<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CiteRight - Legal Research, Simplified</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        /* Logo Header for Intro Page */
        .intro-logo-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 2000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding: 12px 20px;
            display: none;
        }

        .intro-logo-header.show {
            display: block;
        }

        .intro-logo-link {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: #1890ff;
            font-weight: 600;
            font-size: 18px;
            transition: opacity 0.2s;
        }

        .intro-logo-link:hover {
            opacity: 0.8;
        }

        .intro-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #1890ff 0%, #096dd9 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 2px 8px rgba(24, 144, 255, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #a8c4b0 0%, #7a9584 100%);
            padding: 80px 0;
            position: relative;
            overflow: hidden;
        }

        /* Add top padding when logo header is visible */
        body:has(.intro-logo-header.show) .hero {
            padding-top: 140px;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 10%;
            width: 200px;
            height: 300px;
            background: #d4a574;
            transform: rotate(-15deg);
            opacity: 0.8;
            border-radius: 10px;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 15%;
            right: 15%;
            width: 150px;
            height: 250px;
            background: #c49968;
            transform: rotate(20deg);
            opacity: 0.8;
            border-radius: 10px;
        }

        .hero-content {
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .document-icon {
            width: 300px;
            height: 400px;
            background: white;
            margin: 0 auto 40px;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .document-lines {
            padding: 30px;
        }

        .document-line {
            height: 8px;
            background: #e9ecef;
            margin: 8px 0;
            border-radius: 4px;
        }

        .document-line:first-child {
            width: 60%;
        }

        .document-line:nth-child(2) {
            width: 80%;
        }

        .document-line:nth-child(3) {
            width: 70%;
        }

        .document-line:nth-child(4) {
            width: 90%;
        }

        .magnifying-glass {
            position: absolute;
            bottom: 80px;
            right: 50px;
            width: 80px;
            height: 80px;
            border: 6px solid #333;
            border-radius: 50%;
            transform: rotate(-45deg);
        }

        .magnifying-glass::after {
            content: '';
            position: absolute;
            bottom: -30px;
            right: -15px;
            width: 6px;
            height: 30px;
            background: #333;
            border-radius: 3px;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .hero p {
            font-size: 1.2rem;
            color: white;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.95;
        }

        .cta-button {
            display: inline-block;
            background: #007bff;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,123,255,0.3);
        }

        .cta-button:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,123,255,0.4);
        }

        .ai-desk-button {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40,167,69,0.3);
            margin-left: 20px;
        }

        .ai-desk-button:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40,167,69,0.4);
        }

        /* Features Section */
        .features {
            padding: 100px 0;
            background: white;
        }

        .features h2 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .features-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: #6c757d;
            margin-bottom: 80px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 40px 30px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: #007bff;
            border-radius: 12px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .feature-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .feature-card p {
            color: #6c757d;
            line-height: 1.6;
        }

        /* Pricing Section */
        .pricing {
            padding: 100px 0;
            background: #f8f9fa;
        }

        .pricing h2 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 80px;
            color: #2c3e50;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .pricing-card {
            background: white;
            border-radius: 15px;
            padding: 40px 30px;
            text-align: center;
            border: 2px solid #e9ecef;
            position: relative;
            transition: all 0.3s ease;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        .pricing-card.featured {
            border-color: #007bff;
            transform: scale(1.05);
        }

        .best-value {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #007bff;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .pricing-tier {
            font-size: 1.2rem;
            font-weight: 600;
            color: #6c757d;
            margin-bottom: 10px;
        }

        .pricing-price {
            font-size: 3rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .pricing-period {
            color: #6c757d;
            margin-bottom: 30px;
        }

        .pricing-features {
            list-style: none;
            margin-bottom: 30px;
        }

        .pricing-features li {
            padding: 8px 0;
            color: #6c757d;
            position: relative;
            padding-left: 25px;
        }

        .pricing-features li::before {
            content: 'âœ“';
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        .pricing-button {
            width: 100%;
            padding: 15px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pricing-button:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .featured .pricing-button {
            background: #007bff;
        }

        .featured .pricing-button:hover {
            background: #0056b3;
        }

        /* CTA Section */
        .final-cta {
            padding: 100px 0;
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            text-align: center;
            color: white;
        }

        .final-cta h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .final-cta p {
            font-size: 1.2rem;
            margin-bottom: 40px;
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .final-cta .cta-button {
            background: white;
            color: #007bff;
            font-size: 1.2rem;
            padding: 18px 40px;
        }

        .final-cta .cta-button:hover {
            background: #f8f9fa;
            transform: translateY(-3px);
        }

        /* Quiz Bank Styles */
        .quiz-bank {
            padding: 100px 0;
            background: white;
        }

        .quiz-bank h2 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .quiz-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: #6c757d;
            margin-bottom: 60px;
        }

        /* Tab Navigation */
        .quiz-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 40px;
            border-bottom: 2px solid #e9ecef;
        }

        .quiz-tab {
            padding: 15px 30px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: #6c757d;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-tab:hover {
            color: #007bff;
        }

        .quiz-tab.active {
            color: #007bff;
            border-bottom-color: #007bff;
        }

        .quiz-tab-content {
            display: none;
        }

        .quiz-tab-content.active {
            display: block;
        }

        /* Filters */
        .quiz-filters {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .filter-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-row:last-child {
            margin-bottom: 0;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group.search-group {
            flex: 2;
        }

        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .filter-group select,
        .filter-group input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .filter-group select:focus,
        .filter-group input[type="text"]:focus {
            outline: none;
            border-color: #007bff;
        }

        /* Buttons */
        .btn-primary, .btn-secondary, .btn-mode, .btn-review, .btn-retry {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        /* Practice Modes */
        .practice-modes {
            margin-bottom: 40px;
        }

        .practice-modes h3 {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .mode-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .mode-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .mode-card:hover {
            border-color: #007bff;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,123,255,0.2);
        }

        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .mode-card h4 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .mode-card p {
            color: #6c757d;
            margin-bottom: 20px;
        }

        .btn-mode {
            background: #007bff;
            color: white;
            width: 100%;
        }

        .btn-mode:hover {
            background: #0056b3;
        }

        /* Quiz Stats */
        .quiz-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Flashcards */
        .flashcard-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .flashcard-header h3 {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .flashcard-schedule {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .schedule-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
        }

        .schedule-card:hover {
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .schedule-card.urgent {
            border-color: #dc3545;
            background: #fff5f5;
        }

        .schedule-card.soon {
            border-color: #ffc107;
            background: #fffbf0;
        }

        .schedule-card.normal {
            border-color: #28a745;
            background: #f0fff4;
        }

        .schedule-icon {
            font-size: 2rem;
        }

        .schedule-info {
            flex: 1;
        }

        .schedule-info h4 {
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .schedule-count {
            font-size: 1.2rem;
            font-weight: 600;
            color: #495057;
        }

        .btn-review {
            background: #007bff;
            color: white;
        }

        .btn-review:hover {
            background: #0056b3;
        }

        /* Flashcard Manager */
        .flashcard-manager {
            margin-top: 40px;
        }

        .flashcard-manager h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .flashcard-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .flashcard-controls select {
            padding: 12px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
        }

        .flashcard-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .flashcard-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .flashcard-item:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-color: #007bff;
        }

        .flashcard-question {
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .flashcard-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .flashcard-tag {
            background: #e7f3ff;
            color: #007bff;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .flashcard-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .flashcard-status.learning {
            background: #fff3cd;
            color: #856404;
        }

        .flashcard-next {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .flashcard-actions {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 8px;
            transition: all 0.3s ease;
        }

        .btn-icon:hover {
            transform: scale(1.2);
        }

        /* Progress Tracking */
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .progress-header h3 {
            font-size: 1.8rem;
            color: #2c3e50;
        }

        .date-range select {
            padding: 12px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
        }

        .progress-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .progress-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
        }

        .progress-card h4 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .progress-bar-container {
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            height: 30px;
            margin-bottom: 15px;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            transition: width 0.5s ease;
        }

        .trend-chart {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chart-placeholder {
            font-size: 1.5rem;
            color: #6c757d;
        }

        /* Subject Breakdown */
        .subject-breakdown {
            margin-bottom: 40px;
        }

        .subject-breakdown h3 {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .subject-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .subject-card:hover {
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .subject-card h4 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .subject-stats {
            margin-bottom: 15px;
        }

        .subject-stats div {
            padding: 5px 0;
            color: #6c757d;
        }

        .progress-mini {
            background: #e9ecef;
            border-radius: 5px;
            height: 8px;
            overflow: hidden;
        }

        .progress-mini-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.5s ease;
        }

        /* Wrong Questions */
        .wrong-questions {
            margin-top: 40px;
        }

        .wrong-questions h3 {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .wrong-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .wrong-item {
            background: #fff5f5;
            border: 1px solid #fee;
            border-left: 4px solid #dc3545;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .wrong-question {
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .wrong-details {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .wrong-subject {
            background: #dc3545;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .wrong-date {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .btn-retry {
            background: #dc3545;
            color: white;
        }

        .btn-retry:hover {
            background: #c82333;
        }

        /* Admin Styles */
        .admin-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .admin-header h3 {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .import-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .import-section h4 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .import-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
        }

        .upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 12px;
            padding: 60px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: #007bff;
            background: #f0f8ff;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .upload-hint {
            color: #6c757d;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .import-progress {
            padding: 20px;
        }

        .import-status {
            text-align: center;
            margin-top: 15px;
            color: #6c757d;
        }

        /* Question Management */
        .question-management {
            margin-bottom: 40px;
        }

        .question-management h4 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .admin-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .admin-filters input,
        .admin-filters select {
            flex: 1;
            min-width: 200px;
            padding: 12px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
        }

        .admin-table {
            width: 100%;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #e9ecef;
        }

        .admin-table thead {
            background: #f8f9fa;
        }

        .admin-table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #2c3e50;
            border-bottom: 2px solid #dee2e6;
        }

        .admin-table td {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .admin-table tr:last-child td {
            border-bottom: none;
        }

        .admin-table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-badge.published {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.draft {
            background: #fff3cd;
            color: #856404;
        }

        .status-badge.archived {
            background: #e2e3e5;
            color: #383d41;
        }

        /* Audit Section */
        .audit-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
        }

        .audit-section h4 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .audit-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .audit-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .audit-icon {
            font-size: 1.5rem;
        }

        .audit-action {
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .audit-meta {
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .pricing-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .pricing-card.featured {
                transform: none;
            }

            .container {
                padding: 0 15px;
            }

            .quiz-tabs {
                flex-wrap: wrap;
            }

            .quiz-tab {
                font-size: 0.95rem;
                padding: 12px 20px;
            }

            .filter-row {
                flex-direction: column;
            }

            .mode-cards {
                grid-template-columns: 1fr;
            }

            .quiz-stats {
                grid-template-columns: 1fr;
            }

            .flashcard-schedule {
                grid-template-columns: 1fr;
            }

            .progress-overview {
                grid-template-columns: 1fr;
            }

            .subject-grid {
                grid-template-columns: 1fr;
            }

            .admin-table {
                font-size: 0.85rem;
            }

            .admin-table th,
            .admin-table td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
<!-- Logo Header for Intro Page -->
<div class="intro-logo-header" id="introLogoHeader">
    <a href="index.html#/" class="intro-logo-link">
        <div class="intro-logo-icon">âš–ï¸</div>
        <span>CiteRight</span>
    </a>
</div>

<!-- Navigation -->
<div id="navigation-container"></div>

<!-- Hero Section (shown on intro page) -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <div class="document-icon">
                <div class="document-lines">
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                    <div class="document-line"></div>
                </div>
                <div class="magnifying-glass"></div>
            </div>
            <h1>Legal research, simplified</h1>
            <p>CiteRight is a Chrome extension that automatically identifies and displays Taiwan legal judgment citations using the Judicial Yuan API.</p>
            <div style="margin-top: 40px;">
                <a href="#" class="cta-button">Start Free Trial</a>
                <a href="ai-legal-interface.html" class="ai-desk-button">Launch AI Desk</a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section (shown on intro page) -->
<section class="features">
    <div class="container">
        <h2>Streamline your legal research</h2>
        <p class="features-subtitle">CiteRight offers a suite of features designed to enhance your legal research workflow, from quick access to detailed case information to efficient organization of your findings.</p>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ğŸ”</div>
                <h3>Instant Case Identification</h3>
                <p>Automatically detects and displays Taiwan legal judgment details on any webpage, providing immediate access to key information.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">ğŸ“š</div>
                <h3>Bookmark Management</h3>
                <p>Easily bookmark important cases for later review, allowing you to build a personalized library of relevant legal precedents.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">ğŸ“„</div>
                <h3>Comprehensive Case Details</h3>
                <p>Access detailed information about each case, including judgment date, court, case number, and a summary of the judgment.</p>
            </div>
        </div>
    </div>
</section>

<!-- Quiz Bank Section (5-tab main page - default landing) -->
<section class="quiz-bank">
    <div class="container">
        <h2>å¸å¾‹è€ƒé¡Œç·´ç¿’é¡Œåº«ç³»çµ±</h2>
        <p class="quiz-subtitle">æ•´åˆæ­·å±†å¸æ³•å®˜ï¼å¾‹å¸«è€ƒé¡Œï¼Œæä¾›æ™ºæ…§è¤‡ç¿’ã€å­¸ç¿’è¿½è¹¤èˆ‡å¿«é–ƒå¡ç®¡ç†</p>

        <!-- Tab Navigation -->
        <div class="quiz-tabs">
            <button class="quiz-tab active" data-tab="practice">ç·´ç¿’æ¨¡å¼</button>
            <button class="quiz-tab" data-tab="flashcards">å¿«é–ƒå¡</button>
            <button class="quiz-tab" data-tab="progress">å­¸ç¿’è¿½è¹¤</button>
            <button class="quiz-tab" data-tab="admin">é¡Œåº«ç®¡ç†</button>
        </div>

        <!-- Practice Mode Tab -->
        <div class="quiz-tab-content active" id="practice-tab">
            <div class="quiz-filters">
                <div class="filter-row">
                    <div class="filter-group">
                        <label>è€ƒè©¦åˆ¥</label>
                        <select id="exam-type">
                            <option value="">å…¨éƒ¨</option>
                            <option value="judicial">å¸æ³•å®˜</option>
                            <option value="lawyer">å¾‹å¸«</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>å¹´åº¦</label>
                        <select id="exam-year">
                            <option value="">å…¨éƒ¨</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>ç§‘ç›®</label>
                        <select id="subject">
                            <option value="">å…¨éƒ¨</option>
                            <option value="civil">æ°‘æ³•</option>
                            <option value="criminal">åˆ‘æ³•</option>
                            <option value="administrative">è¡Œæ”¿æ³•</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>é¡Œå‹</label>
                        <select id="question-type">
                            <option value="">å…¨éƒ¨</option>
                            <option value="choice">é¸æ“‡é¡Œ</option>
                            <option value="essay">ç”³è«–é¡Œ</option>
                        </select>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group search-group">
                        <label>é—œéµå­—æœå°‹</label>
                        <input type="text" id="keyword-search" placeholder="è¼¸å…¥é—œéµå­—...">
                    </div>
                    <button class="btn-primary" id="apply-filters">å¥—ç”¨ç¯©é¸</button>
                    <button class="btn-secondary" id="reset-filters">é‡ç½®</button>
                </div>
            </div>

            <div class="practice-modes">
                <h3>é¸æ“‡ç·´ç¿’æ¨¡å¼</h3>
                <div class="mode-cards">
                    <div class="mode-card" data-mode="historical">
                        <div class="mode-icon">ğŸ“š</div>
                        <h4>æ­·å±†è€ƒé¡Œ</h4>
                        <p>æŒ‰å¹´åº¦ç·´ç¿’æ­·å±†è€ƒé¡Œ</p>
                        <button class="btn-mode">é–‹å§‹ç·´ç¿’</button>
                    </div>
                    <div class="mode-card" data-mode="simulation">
                        <div class="mode-icon">ğŸ“</div>
                        <h4>æ¨¡æ“¬è€ƒè©¦</h4>
                        <p>æ¨¡æ“¬çœŸå¯¦è€ƒè©¦æƒ…å¢ƒ</p>
                        <button class="btn-mode">é–‹å§‹æ¸¬é©—</button>
                    </div>
                    <div class="mode-card" data-mode="mixed">
                        <div class="mode-icon">ğŸ”€</div>
                        <h4>æ··åˆç·´ç¿’</h4>
                        <p>éš¨æ©Ÿæ··åˆä¸åŒå¹´åº¦é¡Œç›®</p>
                        <button class="btn-mode">éš¨æ©Ÿç·´ç¿’</button>
                    </div>
                    <div class="mode-card" data-mode="favorites">
                        <div class="mode-icon">â­</div>
                        <h4>æ”¶è—é¡Œåº«</h4>
                        <p>è¤‡ç¿’å·²æ”¶è—çš„é¡Œç›®</p>
                        <button class="btn-mode">æª¢è¦–æ”¶è—</button>
                    </div>
                </div>
            </div>

            <div class="quiz-stats" id="quiz-stats">
                <div class="stat-card">
                    <div class="stat-number" id="stat-total">-</div>
                    <div class="stat-label">ç¸½é¡Œæ•¸</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="stat-practiced">-</div>
                    <div class="stat-label">å·²ç·´ç¿’</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="stat-accuracy">-</div>
                    <div class="stat-label">æ­£ç¢ºç‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="stat-to-review">-</div>
                    <div class="stat-label">å¾…è¤‡ç¿’</div>
                </div>
            </div>
        </div>

        <!-- Flashcards Tab -->
        <div class="quiz-tab-content" id="flashcards-tab">
            <div class="flashcard-header">
                <h3>å¿«é–ƒå¡è¤‡ç¿’ç³»çµ±</h3>
                <p>ä½¿ç”¨é–“éš”é‡è¤‡æ¼”ç®—æ³•ï¼Œæå‡è¨˜æ†¶æ•ˆæœ</p>
            </div>

            <div class="flashcard-schedule">
                <div class="schedule-card urgent">
                    <div class="schedule-icon">ğŸ”´</div>
                    <div class="schedule-info">
                        <h4>ä»Šæ—¥å¾…è¤‡ç¿’</h4>
                        <div class="schedule-count">24 å¼µå¡ç‰‡</div>
                    </div>
                    <button class="btn-review">ç«‹å³è¤‡ç¿’</button>
                </div>
                <div class="schedule-card soon">
                    <div class="schedule-icon">ğŸŸ¡</div>
                    <div class="schedule-info">
                        <h4>æ˜æ—¥é å®š</h4>
                        <div class="schedule-count">18 å¼µå¡ç‰‡</div>
                    </div>
                    <button class="btn-review">æŸ¥çœ‹è©³æƒ…</button>
                </div>
                <div class="schedule-card normal">
                    <div class="schedule-icon">ğŸŸ¢</div>
                    <div class="schedule-info">
                        <h4>æœ¬é€±é å®š</h4>
                        <div class="schedule-count">67 å¼µå¡ç‰‡</div>
                    </div>
                    <button class="btn-review">æŸ¥çœ‹è©³æƒ…</button>
                </div>
            </div>

            <div class="flashcard-manager">
                <h3>å¿«é–ƒå¡ç®¡ç†</h3>
                <div class="flashcard-controls">
                    <button class="btn-primary" id="create-flashcard">å»ºç«‹æ–°å¡ç‰‡</button>
                    <button class="btn-secondary" id="import-flashcards">æ‰¹æ¬¡åŒ¯å…¥</button>
                    <select id="flashcard-filter">
                        <option value="all">å…¨éƒ¨å¡ç‰‡</option>
                        <option value="new">æ–°å¡ç‰‡</option>
                        <option value="learning">å­¸ç¿’ä¸­</option>
                        <option value="review">è¤‡ç¿’ä¸­</option>
                        <option value="mastered">å·²æŒæ¡</option>
                    </select>
                </div>

                <div class="flashcard-list">
                    <div class="flashcard-item">
                        <div class="flashcard-content">
                            <div class="flashcard-question">æ°‘æ³•ç¬¬ 184 æ¢ç¬¬ 1 é …è¦å®šä¹‹ä¾µæ¬Šè¡Œç‚ºè¦ä»¶ç‚ºä½•ï¼Ÿ</div>
                            <div class="flashcard-meta">
                                <span class="flashcard-tag">æ°‘æ³•</span>
                                <span class="flashcard-status learning">å­¸ç¿’ä¸­</span>
                                <span class="flashcard-next">ä¸‹æ¬¡è¤‡ç¿’: 2å¤©å¾Œ</span>
                            </div>
                        </div>
                        <div class="flashcard-actions">
                            <button class="btn-icon" title="ç·¨è¼¯">âœï¸</button>
                            <button class="btn-icon" title="åˆªé™¤">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Tracking Tab -->
        <div class="quiz-tab-content" id="progress-tab">
            <div class="progress-header">
                <h3>å­¸ç¿’è¿½è¹¤åˆ†æ</h3>
                <div class="date-range">
                    <select id="time-range">
                        <option value="7">æœ€è¿‘ 7 å¤©</option>
                        <option value="30">æœ€è¿‘ 30 å¤©</option>
                        <option value="90">æœ€è¿‘ 90 å¤©</option>
                        <option value="all">å…¨éƒ¨</option>
                    </select>
                </div>
            </div>

            <div class="progress-overview">
                <div class="progress-card">
                    <h4>ç·´ç¿’é€²åº¦</h4>
                    <div class="progress-bar-container">
                        <div class="progress-bar" style="width: 65%;">
                            <span>65%</span>
                        </div>
                    </div>
                    <p>å·²å®Œæˆ 1,582 / 2,435 é¡Œ</p>
                </div>
                <div class="progress-card">
                    <h4>æ­£ç¢ºç‡è¶¨å‹¢</h4>
                    <div class="trend-chart">
                        <div class="chart-placeholder">ğŸ“ˆ åœ–è¡¨å€åŸŸ</div>
                    </div>
                </div>
            </div>

            <div class="subject-breakdown">
                <h3>ç§‘ç›®åˆ†æ</h3>
                <div class="subject-grid">
                    <div class="subject-card">
                        <h4>æ°‘æ³•</h4>
                        <div class="subject-stats">
                            <div>ç·´ç¿’é¡Œæ•¸: 456</div>
                            <div>æ­£ç¢ºç‡: 78%</div>
                            <div>å¼±é»: ç‰©æ¬Šç·¨</div>
                        </div>
                        <div class="progress-mini">
                            <div class="progress-mini-bar" style="width: 78%;"></div>
                        </div>
                    </div>
                    <div class="subject-card">
                        <h4>åˆ‘æ³•</h4>
                        <div class="subject-stats">
                            <div>ç·´ç¿’é¡Œæ•¸: 389</div>
                            <div>æ­£ç¢ºç‡: 71%</div>
                            <div>å¼±é»: å…±çŠ¯ç†è«–</div>
                        </div>
                        <div class="progress-mini">
                            <div class="progress-mini-bar" style="width: 71%;"></div>
                        </div>
                    </div>
                    <div class="subject-card">
                        <h4>è¡Œæ”¿æ³•</h4>
                        <div class="subject-stats">
                            <div>ç·´ç¿’é¡Œæ•¸: 342</div>
                            <div>æ­£ç¢ºç‡: 69%</div>
                            <div>å¼±é»: è¡Œæ”¿æ•‘æ¿Ÿ</div>
                        </div>
                        <div class="progress-mini">
                            <div class="progress-mini-bar" style="width: 69%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="wrong-questions">
                <h3>éŒ¯é¡Œæœ¬</h3>
                <div class="wrong-list">
                    <div class="wrong-item">
                        <div class="wrong-content">
                            <div class="wrong-question">é—œæ–¼å…¬å¸æ³•ä¸­è‘£äº‹æœƒä¹‹å¬é›†ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ</div>
                            <div class="wrong-details">
                                <span class="wrong-subject">å…¬å¸æ³•</span>
                                <span class="wrong-date">éŒ¯èª¤ 3 æ¬¡ | æœ€å¾Œç·´ç¿’: 2024-03-15</span>
                            </div>
                        </div>
                        <button class="btn-retry">é‡æ–°ç·´ç¿’</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Tab -->
        <div class="quiz-tab-content" id="admin-tab">
            <div class="admin-header">
                <h3>é¡Œåº«ç®¡ç†å¾Œå°</h3>
                <p>ç®¡ç†è€…å°ˆç”¨ï¼šé¡Œç›®ç¶­è­·èˆ‡æ‰¹æ¬¡åŒ¯å…¥</p>
            </div>

            <div class="admin-actions">
                <button class="btn-primary" id="add-question">â• æ–°å¢é¡Œç›®</button>
                <button class="btn-primary" id="batch-import">ğŸ“¥ æ‰¹æ¬¡åŒ¯å…¥</button>
                <button class="btn-secondary" id="export-data">ğŸ“¤ åŒ¯å‡ºè³‡æ–™</button>
                <button class="btn-secondary" id="audit-log">ğŸ“‹ æŸ¥çœ‹æ—¥èªŒ</button>
            </div>

            <div class="import-section">
                <h4>æ‰¹æ¬¡åŒ¯å…¥é¡Œåº«</h4>
                <div class="import-container">
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">ğŸ“</div>
                        <p>æ‹–æ›³æª”æ¡ˆè‡³æ­¤æˆ–é»æ“Šä¸Šå‚³</p>
                        <p class="upload-hint">æ”¯æ´æ ¼å¼: JSON, CSV, PDF</p>
                        <input type="file" id="file-upload" accept=".json,.csv,.pdf" hidden>
                    </div>
                    <div class="import-progress" id="import-progress" style="display: none;">
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="import-progress-bar" style="width: 0%;">
                                <span id="import-percentage">0%</span>
                            </div>
                        </div>
                        <div class="import-status" id="import-status">æ­£åœ¨è™•ç†...</div>
                    </div>
                </div>
            </div>

            <div class="question-management">
                <h4>é¡Œç›®åˆ—è¡¨</h4>
                <div class="admin-filters">
                    <input type="text" placeholder="æœå°‹é¡Œç›®..." id="admin-search">
                    <select id="admin-status">
                        <option value="all">å…¨éƒ¨ç‹€æ…‹</option>
                        <option value="published">å·²ç™¼å¸ƒ</option>
                        <option value="draft">è‰ç¨¿</option>
                        <option value="archived">å·²å°å­˜</option>
                    </select>
                    <select id="admin-source">
                        <option value="all">å…¨éƒ¨ä¾†æº</option>
                        <option value="official">å®˜æ–¹é¡Œåº«</option>
                        <option value="manual">æ‰‹å‹•æ–°å¢</option>
                        <option value="imported">æ‰¹æ¬¡åŒ¯å…¥</option>
                    </select>
                </div>

                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>é¡Œè™Ÿ</th>
                            <th>é¡Œç›®å…§å®¹</th>
                            <th>è€ƒè©¦åˆ¥</th>
                            <th>å¹´åº¦</th>
                            <th>ç§‘ç›®</th>
                            <th>ç‹€æ…‹</th>
                            <th>æœ€å¾Œæ›´æ–°</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#2024-001</td>
                            <td>é—œæ–¼æ°‘æ³•ç¬¬ 184 æ¢ä¾µæ¬Šè¡Œç‚ºä¹‹è¦å®š...</td>
                            <td>å¸æ³•å®˜</td>
                            <td>2024</td>
                            <td>æ°‘æ³•</td>
                            <td><span class="status-badge published">å·²ç™¼å¸ƒ</span></td>
                            <td>2024-03-20</td>
                            <td>
                                <button class="btn-icon" title="ç·¨è¼¯">âœï¸</button>
                                <button class="btn-icon" title="é è¦½">ğŸ‘ï¸</button>
                                <button class="btn-icon" title="åˆªé™¤">ğŸ—‘ï¸</button>
                            </td>
                        </tr>
                        <tr>
                            <td>#2024-002</td>
                            <td>åˆ‘æ³•å…±çŠ¯ç†è«–ä¸­ï¼Œé—œæ–¼å¹«åŠ©çŠ¯...</td>
                            <td>å¾‹å¸«</td>
                            <td>2024</td>
                            <td>åˆ‘æ³•</td>
                            <td><span class="status-badge draft">è‰ç¨¿</span></td>
                            <td>2024-03-19</td>
                            <td>
                                <button class="btn-icon" title="ç·¨è¼¯">âœï¸</button>
                                <button class="btn-icon" title="é è¦½">ğŸ‘ï¸</button>
                                <button class="btn-icon" title="åˆªé™¤">ğŸ—‘ï¸</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="audit-section">
                <h4>ç¨½æ ¸ç´€éŒ„</h4>
                <div class="audit-list">
                    <div class="audit-item">
                        <div class="audit-icon">âœï¸</div>
                        <div class="audit-content">
                            <div class="audit-action">é¡Œç›® #2024-001 å·²æ›´æ–°</div>
                            <div class="audit-meta">ç®¡ç†å“¡: admin@example.com | 2024-03-20 14:30</div>
                        </div>
                    </div>
                    <div class="audit-item">
                        <div class="audit-icon">ğŸ“¥</div>
                        <div class="audit-content">
                            <div class="audit-action">æ‰¹æ¬¡åŒ¯å…¥ 150 é¡ŒæˆåŠŸ</div>
                            <div class="audit-meta">ç®¡ç†å“¡: admin@example.com | 2024-03-20 10:15</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Pricing Section (shown on intro page) -->
<section class="pricing">
    <div class="container">
        <h2>Pricing</h2>

        <div class="pricing-grid">
            <div class="pricing-card">
                <div class="pricing-tier">Basic</div>
                <div class="pricing-price">Free</div>
                <div class="pricing-period">/month</div>
                <ul class="pricing-features">
                    <li>Instant Case Identification</li>
                    <li>Bookmark Management</li>
                    <li>Limited Case Details</li>
                </ul>
                <button class="pricing-button">Start Free Trial</button>
            </div>

            <div class="pricing-card featured">
                <div class="best-value">Best Value</div>
                <div class="pricing-tier">Pro</div>
                <div class="pricing-price">$9.99</div>
                <div class="pricing-period">/month</div>
                <ul class="pricing-features">
                    <li>All Basic Features</li>
                    <li>Comprehensive Case Details</li>
                    <li>Advanced Search</li>
                </ul>
                <button class="pricing-button">Upgrade to Pro</button>
            </div>

            <div class="pricing-card">
                <div class="pricing-tier">Enterprise</div>
                <div class="pricing-price">Contact Us</div>
                <div class="pricing-period"></div>
                <ul class="pricing-features">
                    <li>Customizable Features</li>
                    <li>Dedicated Support</li>
                    <li>Scalable Solutions</li>
                </ul>
                <button class="pricing-button">Contact Us</button>
            </div>
        </div>
    </div>
</section>

<!-- Final CTA Section (shown on intro page) -->
<section class="final-cta">
    <div class="container">
        <h2>Ready to transform your legal research?</h2>
        <p>Join thousands of legal professionals who trust CiteRight to streamline their workflow and enhance their research capabilities.</p>
        <div>
            <a href="#" class="cta-button">Start Free Trial</a>
            <a href="ai-legal-interface.html" class="ai-desk-button">Launch AI Desk</a>
        </div>
    </div>
</section>

<!-- Quiz and Flashcard Handlers -->
<script src="../scripts/quiz-handler.js"></script>
<script src="../scripts/flashcard-handler.js"></script>

<script>
    // Tab Navigation
    document.addEventListener('DOMContentLoaded', function() {
        const tabButtons = document.querySelectorAll('.quiz-tab');
        const tabContents = document.querySelectorAll('.quiz-tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', function() {
                const targetTab = this.getAttribute('data-tab');

                // Remove active class from all tabs and contents
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));

                // Add active class to clicked tab and corresponding content
                this.classList.add('active');
                document.getElementById(targetTab + '-tab').classList.add('active');
            });
        });

        // Filter functionality
        const applyFiltersBtn = document.getElementById('apply-filters');
        const resetFiltersBtn = document.getElementById('reset-filters');

        if (applyFiltersBtn) {
            applyFiltersBtn.addEventListener('click', function() {
                const examType = document.getElementById('exam-type').value;
                const examYear = document.getElementById('exam-year').value;
                const subject = document.getElementById('subject').value;
                const questionType = document.getElementById('question-type').value;
                const keyword = document.getElementById('keyword-search').value;

                console.log('Applying filters:', {
                    examType,
                    examYear,
                    subject,
                    questionType,
                    keyword
                });

                // TODO: Implement actual filter logic with backend API
                alert('ç¯©é¸å·²å¥—ç”¨ï¼é€™å°‡é€£æ¥åˆ°å¾Œç«¯ API ä»¥ç²å–ç¯©é¸çµæœã€‚');
            });
        }

        if (resetFiltersBtn) {
            resetFiltersBtn.addEventListener('click', function() {
                document.getElementById('exam-type').value = '';
                document.getElementById('exam-year').value = '';
                document.getElementById('subject').value = '';
                document.getElementById('question-type').value = '';
                document.getElementById('keyword-search').value = '';
                console.log('Filters reset');
            });
        }

        // Practice mode selection
        const modeCards = document.querySelectorAll('.mode-card');
        modeCards.forEach(card => {
            const button = card.querySelector('.btn-mode');
            if (button) {
                button.addEventListener('click', async function(e) {
                    e.stopPropagation();
                    const mode = card.getAttribute('data-mode');
                    console.log('Starting practice mode:', mode);

                    try {
                        // Get current filter values
                        const examType = document.getElementById('exam-type')?.value || '';
                        const examYear = document.getElementById('exam-year')?.value || '';
                        const subject = document.getElementById('subject')?.value || '';
                        const questionType = document.getElementById('question-type')?.value || '';

                        // Show loading
                        button.disabled = true;
                        button.textContent = 'è¼‰å…¥ä¸­...';

                        // Start practice session
                        const sessionData = await window.quizHandler.startPractice(mode, {
                            examType,
                            examYear,
                            subject,
                            questionType
                        });

                        console.log('Practice session started:', sessionData);
                        
                        // Navigate to practice interface
                        // TODO: Create practice interface page or modal
                        alert(`å·²å•Ÿå‹•${card.querySelector('h4').textContent}æ¨¡å¼ï¼\nå…± ${sessionData.totalQuestions} é¡Œã€‚`);
                        
                        // You can navigate to a practice page here
                        // window.extensionRouter?.navigate('practice-session');
                    } catch (error) {
                        console.error('Error starting practice:', error);
                        alert('å•Ÿå‹•ç·´ç¿’æ¨¡å¼æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
                    } finally {
                        button.disabled = false;
                        button.textContent = 'é–‹å§‹ç·´ç¿’';
                    }
                });
            }
        });

        // Load flashcard data
        async function loadFlashcards() {
            try {
                const dueData = await window.flashcardHandler.getDueFlashcards();
                
                // Update schedule cards
                const urgentCard = document.querySelector('.schedule-card.urgent .schedule-count');
                const soonCard = document.querySelector('.schedule-card.soon .schedule-count');
                const normalCard = document.querySelector('.schedule-card.normal .schedule-count');
                
                if (urgentCard) {
                    urgentCard.textContent = `${dueData.summary.urgent} å¼µå¡ç‰‡`;
                }
                if (soonCard) {
                    soonCard.textContent = `${dueData.summary.soon} å¼µå¡ç‰‡`;
                }
                if (normalCard) {
                    normalCard.textContent = `${dueData.summary.normal} å¼µå¡ç‰‡`;
                }

                // Load flashcard list
                const filter = document.getElementById('flashcard-filter')?.value || 'all';
                const flashcards = await window.flashcardHandler.getFlashcards(filter);
                
                // Update flashcard list UI
                updateFlashcardList(flashcards);
            } catch (error) {
                console.error('Error loading flashcards:', error);
            }
        }

        function updateFlashcardList(flashcards) {
            const flashcardList = document.querySelector('.flashcard-list');
            if (!flashcardList) return;

            if (flashcards.length === 0) {
                flashcardList.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">å°šç„¡å¿«é–ƒå¡</div>';
                return;
            }

            flashcardList.innerHTML = flashcards.map(f => `
                <div class="flashcard-item" data-id="${f.id}">
                    <div class="flashcard-content">
                        <div class="flashcard-question">${f.frontText}</div>
                        <div class="flashcard-meta">
                            <span class="flashcard-tag">${f.subject || 'æœªåˆ†é¡'}</span>
                            <span class="flashcard-status ${f.status}">${getStatusText(f.status)}</span>
                            <span class="flashcard-next">ä¸‹æ¬¡è¤‡ç¿’: ${formatDate(f.nextReviewDate)}</span>
                        </div>
                    </div>
                    <div class="flashcard-actions">
                        <button class="btn-icon" title="ç·¨è¼¯" onclick="editFlashcard(${f.id})">âœï¸</button>
                        <button class="btn-icon" title="åˆªé™¤" onclick="deleteFlashcard(${f.id})">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');
        }

        function getStatusText(status) {
            const statusMap = {
                'new': 'æ–°å¡ç‰‡',
                'learning': 'å­¸ç¿’ä¸­',
                'review': 'è¤‡ç¿’ä¸­',
                'mastered': 'å·²æŒæ¡'
            };
            return statusMap[status] || status;
        }

        function formatDate(dateString) {
            if (!dateString) return 'æœªçŸ¥';
            const date = new Date(dateString);
            const today = new Date();
            const diffTime = date - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) return 'å·²éæœŸ';
            if (diffDays === 0) return 'ä»Šå¤©';
            if (diffDays === 1) return 'æ˜å¤©';
            return `${diffDays} å¤©å¾Œ`;
        }

        // Flashcard functionality
        const createFlashcardBtn = document.getElementById('create-flashcard');
        if (createFlashcardBtn) {
            createFlashcardBtn.addEventListener('click', function() {
                // TODO: Open flashcard creation modal
                const frontText = prompt('è¼¸å…¥å•é¡Œ/æ­£é¢å…§å®¹ï¼š');
                if (frontText) {
                    const backText = prompt('è¼¸å…¥ç­”æ¡ˆ/èƒŒé¢å…§å®¹ï¼š');
                    if (backText) {
                        window.flashcardHandler.createFlashcard({
                            frontText,
                            backText,
                            tags: []
                        }).then(() => {
                            alert('å¿«é–ƒå¡å·²å»ºç«‹ï¼');
                            loadFlashcards();
                        }).catch(err => {
                            alert('å»ºç«‹å¿«é–ƒå¡å¤±æ•—ï¼š' + err.message);
                        });
                    }
                }
            });
        }

        const importFlashcardsBtn = document.getElementById('import-flashcards');
        if (importFlashcardsBtn) {
            importFlashcardsBtn.addEventListener('click', function() {
                // TODO: Open import dialog
                alert('æ‰¹æ¬¡åŒ¯å…¥åŠŸèƒ½é–‹ç™¼ä¸­...');
            });
        }

        // Flashcard filter
        const flashcardFilter = document.getElementById('flashcard-filter');
        if (flashcardFilter) {
            flashcardFilter.addEventListener('change', function() {
                loadFlashcards();
            });
        }

        // Load flashcards on tab switch
        const flashcardsTab = document.getElementById('flashcards-tab');
        if (flashcardsTab) {
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.target.classList.contains('active')) {
                        loadFlashcards();
                    }
                });
            });
            observer.observe(flashcardsTab, { attributes: true, attributeFilter: ['class'] });
        }

        // Load initial flashcards
        loadFlashcards();

        // Admin functionality
        const uploadArea = document.getElementById('upload-area');
        const fileUpload = document.getElementById('file-upload');
        const importProgress = document.getElementById('import-progress');
        const importProgressBar = document.getElementById('import-progress-bar');
        const importPercentage = document.getElementById('import-percentage');
        const importStatus = document.getElementById('import-status');

        if (uploadArea && fileUpload) {
            uploadArea.addEventListener('click', function() {
                fileUpload.click();
            });

            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.borderColor = '#007bff';
                this.style.background = '#f0f8ff';
            });

            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.style.borderColor = '#dee2e6';
                this.style.background = '';
            });

            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.borderColor = '#dee2e6';
                this.style.background = '';

                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileUpload(files[0]);
                }
            });

            fileUpload.addEventListener('change', function() {
                if (this.files.length > 0) {
                    handleFileUpload(this.files[0]);
                }
            });
        }

        function handleFileUpload(file) {
            console.log('Uploading file:', file.name);

            // Show progress
            uploadArea.style.display = 'none';
            importProgress.style.display = 'block';

            // Simulate upload progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                importProgressBar.style.width = progress + '%';
                importPercentage.textContent = progress + '%';

                if (progress === 50) {
                    importStatus.textContent = 'è§£ææª”æ¡ˆä¸­...';
                } else if (progress === 80) {
                    importStatus.textContent = 'é©—è­‰è³‡æ–™ä¸­...';
                }

                if (progress >= 100) {
                    clearInterval(interval);
                    importStatus.textContent = 'åŒ¯å…¥å®Œæˆï¼';

                    // Reset after 2 seconds
                    setTimeout(() => {
                        uploadArea.style.display = 'block';
                        importProgress.style.display = 'none';
                        importProgressBar.style.width = '0%';
                        importPercentage.textContent = '0%';
                        importStatus.textContent = 'æ­£åœ¨è™•ç†...';
                        fileUpload.value = '';

                        alert(`æˆåŠŸåŒ¯å…¥é¡Œåº«æª”æ¡ˆï¼š${file.name}`);
                    }, 2000);
                }
            }, 300);
        }

        // Admin actions
        const addQuestionBtn = document.getElementById('add-question');
        if (addQuestionBtn) {
            addQuestionBtn.addEventListener('click', function() {
                alert('é–‹å•Ÿæ–°å¢é¡Œç›®å°è©±æ¡†');
                // TODO: Open question creation modal
            });
        }

        const batchImportBtn = document.getElementById('batch-import');
        if (batchImportBtn) {
            batchImportBtn.addEventListener('click', function() {
                uploadArea.click();
            });
        }

        const exportDataBtn = document.getElementById('export-data');
        if (exportDataBtn) {
            exportDataBtn.addEventListener('click', function() {
                alert('åŒ¯å‡ºé¡Œåº«è³‡æ–™');
                // TODO: Implement export functionality
            });
        }

        const auditLogBtn = document.getElementById('audit-log');
        if (auditLogBtn) {
            auditLogBtn.addEventListener('click', function() {
                alert('é¡¯ç¤ºå®Œæ•´ç¨½æ ¸æ—¥èªŒ');
                // TODO: Navigate to audit log page
            });
        }

        // Admin search and filters
        const adminSearch = document.getElementById('admin-search');
        if (adminSearch) {
            adminSearch.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                console.log('Searching for:', searchTerm);
                // TODO: Implement search functionality
            });
        }

        const adminStatus = document.getElementById('admin-status');
        if (adminStatus) {
            adminStatus.addEventListener('change', function() {
                console.log('Filtering by status:', this.value);
                // TODO: Filter questions by status
            });
        }

        const adminSource = document.getElementById('admin-source');
        if (adminSource) {
            adminSource.addEventListener('change', function() {
                console.log('Filtering by source:', this.value);
                // TODO: Filter questions by source
            });
        }

        // Load analytics data
        async function loadAnalytics(timeRange = '30') {
            try {
                // Load progress data
                const progressResult = await fetch(`http://localhost:3000/api/analytics/progress?timeRange=${timeRange}`);
                const progressData = await progressResult.json();
                
                if (progressData.success) {
                    const overall = progressData.data.overall;
                    
                    // Update progress bar
                    const progressBar = document.querySelector('.progress-bar');
                    if (progressBar) {
                        progressBar.style.width = overall.progressPercentage + '%';
                        progressBar.querySelector('span').textContent = overall.progressPercentage + '%';
                    }
                    
                    // Update progress text
                    const progressText = document.querySelector('.progress-card p');
                    if (progressText) {
                        progressText.textContent = `å·²å®Œæˆ ${overall.practicedQuestions} / ${overall.totalQuestions} é¡Œ`;
                    }
                }

                // Load subject breakdown
                const subjectResult = await fetch('http://localhost:3000/api/analytics/subject-breakdown');
                const subjectData = await subjectResult.json();
                
                if (subjectData.success) {
                    updateSubjectBreakdown(subjectData.data.subjects);
                }

                // Load wrong questions
                const wrongResult = await fetch('http://localhost:3000/api/analytics/wrong-questions?limit=10');
                const wrongData = await wrongResult.json();
                
                if (wrongData.success) {
                    updateWrongQuestions(wrongData.data);
                }
            } catch (error) {
                console.error('Error loading analytics:', error);
            }
        }

        function updateSubjectBreakdown(subjects) {
            const subjectGrid = document.querySelector('.subject-grid');
            if (!subjectGrid) return;

            subjectGrid.innerHTML = subjects.map(s => `
                <div class="subject-card">
                    <h4>${s.subject}</h4>
                    <div class="subject-stats">
                        <div>ç·´ç¿’é¡Œæ•¸: ${s.practicedQuestions}</div>
                        <div>æ­£ç¢ºç‡: ${s.accuracy}%</div>
                        <div>å¼±é»: ${s.accuracy < 70 ? 'éœ€è¦åŠ å¼·' : 'è¡¨ç¾è‰¯å¥½'}</div>
                    </div>
                    <div class="progress-mini">
                        <div class="progress-mini-bar" style="width: ${s.progressPercentage}%;"></div>
                    </div>
                </div>
            `).join('');
        }

        function updateWrongQuestions(questions) {
            const wrongList = document.querySelector('.wrong-list');
            if (!wrongList) return;

            if (questions.length === 0) {
                wrongList.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">å°šç„¡éŒ¯é¡Œ</div>';
                return;
            }

            wrongList.innerHTML = questions.map(q => `
                <div class="wrong-item">
                    <div class="wrong-content">
                        <div class="wrong-question">${q.questionText.substring(0, 100)}${q.questionText.length > 100 ? '...' : ''}</div>
                        <div class="wrong-details">
                            <span class="wrong-subject">${q.subject}</span>
                            <span class="wrong-date">éŒ¯èª¤ ${q.errorCount} æ¬¡ | æœ€å¾Œç·´ç¿’: ${new Date(q.lastAttemptDate).toLocaleDateString('zh-TW')}</span>
                        </div>
                    </div>
                    <button class="btn-retry" onclick="retryQuestion(${q.id})">é‡æ–°ç·´ç¿’</button>
                </div>
            `).join('');
        }

        // Time range filter for progress tracking
        const timeRange = document.getElementById('time-range');
        if (timeRange) {
            timeRange.addEventListener('change', function() {
                loadAnalytics(this.value);
            });
        }

        // Load analytics when progress tab is shown
        const progressTab = document.getElementById('progress-tab');
        if (progressTab) {
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.target.classList.contains('active')) {
                        const timeRangeValue = document.getElementById('time-range')?.value || '30';
                        loadAnalytics(timeRangeValue);
                    }
                });
            });
            observer.observe(progressTab, { attributes: true, attributeFilter: ['class'] });
        }

        // Global helper functions
        window.editFlashcard = function(id) {
            alert('ç·¨è¼¯å¿«é–ƒå¡åŠŸèƒ½é–‹ç™¼ä¸­...');
        };

        window.deleteFlashcard = async function(id) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤å¿«é–ƒå¡å—ï¼Ÿ')) {
                try {
                    await window.flashcardHandler.deleteFlashcard(id);
                    alert('å¿«é–ƒå¡å·²åˆªé™¤');
                    loadFlashcards();
                } catch (error) {
                    alert('åˆªé™¤å¤±æ•—ï¼š' + error.message);
                }
            }
        };

        window.retryQuestion = function(questionId) {
            // Navigate to practice with this question
            window.extensionRouter?.navigate('practice');
            alert('å°‡é–‹å§‹ç·´ç¿’æ­¤é¡Œç›®...');
        };

        // Review buttons in flashcard schedule
        const reviewButtons = document.querySelectorAll('.btn-review');
        reviewButtons.forEach(button => {
            button.addEventListener('click', function() {
                const card = this.closest('.schedule-card');
                const scheduleType = card.querySelector('h4').textContent;
                console.log('Starting review for:', scheduleType);
                alert(`é–‹å§‹è¤‡ç¿’ï¼š${scheduleType}`);
                // TODO: Navigate to flashcard review page
            });
        });

        // Retry wrong questions
        const retryButtons = document.querySelectorAll('.btn-retry');
        retryButtons.forEach(button => {
            button.addEventListener('click', function() {
                const question = this.closest('.wrong-item').querySelector('.wrong-question').textContent;
                console.log('Retrying question:', question);
                alert('é‡æ–°ç·´ç¿’æ­¤é¡Œç›®');
                // TODO: Navigate to question practice
            });
        });

        // Table action buttons
        document.querySelectorAll('.admin-table .btn-icon').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const action = this.getAttribute('title');
                const row = this.closest('tr');
                const questionId = row.querySelector('td:first-child').textContent;

                console.log(`${action} question:`, questionId);

                switch(action) {
                    case 'ç·¨è¼¯':
                        alert(`ç·¨è¼¯é¡Œç›® ${questionId}`);
                        // TODO: Open edit modal
                        break;
                    case 'é è¦½':
                        alert(`é è¦½é¡Œç›® ${questionId}`);
                        // TODO: Open preview modal
                        break;
                    case 'åˆªé™¤':
                        if (confirm(`ç¢ºå®šè¦åˆªé™¤é¡Œç›® ${questionId} å—ï¼Ÿ`)) {
                            alert(`å·²åˆªé™¤é¡Œç›® ${questionId}`);
                            // TODO: Delete question via API
                        }
                        break;
                }
            });
        });

        // Flashcard actions
        document.querySelectorAll('.flashcard-actions .btn-icon').forEach(button => {
            button.addEventListener('click', function() {
                const action = this.getAttribute('title');
                const flashcard = this.closest('.flashcard-item');
                const question = flashcard.querySelector('.flashcard-question').textContent;

                console.log(`${action} flashcard:`, question);

                if (action === 'ç·¨è¼¯') {
                    alert(`ç·¨è¼¯å¿«é–ƒå¡ï¼š${question.substring(0, 30)}...`);
                    // TODO: Open edit modal
                } else if (action === 'åˆªé™¤') {
                    if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤å¿«é–ƒå¡å—ï¼Ÿ')) {
                        flashcard.remove();
                        alert('å¿«é–ƒå¡å·²åˆªé™¤');
                        // TODO: Delete via API
                    }
                }
            });
        });

        // Load stats
        async function loadStats() {
            try {
                const stats = await window.quizHandler.getStats();
                document.getElementById('stat-total').textContent = stats.totalQuestions || 0;
                document.getElementById('stat-practiced').textContent = stats.practiced || 0;
                document.getElementById('stat-accuracy').textContent = (stats.accuracy || 0) + '%';
                document.getElementById('stat-to-review').textContent = stats.toReview || 0;
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Load stats when practice tab is shown
        const practiceTab = document.getElementById('practice-tab');
        if (practiceTab) {
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.target.classList.contains('active')) {
                        loadStats();
                    }
                });
            });
            observer.observe(practiceTab, { attributes: true, attributeFilter: ['class'] });
        }

        // Load initial stats
        loadStats();

        console.log('Quiz Bank System initialized');
    });

    // Initialize Router
    function initializeRouter() {
        // Load navigation component
        const navContainer = document.getElementById('navigation-container');
        if (navContainer) {
            fetch(chrome?.runtime?.getURL ? chrome.runtime.getURL('extension/components/navigation.html') : '../components/navigation.html')
                .then(response => response.text())
                .then(html => {
                    navContainer.innerHTML = html;
                    
                    // Re-execute navigation script
                    const scripts = navContainer.querySelectorAll('script');
                    scripts.forEach(oldScript => {
                        const newScript = document.createElement('script');
                        Array.from(oldScript.attributes).forEach(attr => {
                            newScript.setAttribute(attr.name, attr.value);
                        });
                        newScript.appendChild(document.createTextNode(oldScript.innerHTML));
                        oldScript.parentNode.replaceChild(newScript, oldScript);
                    });
                })
                .catch(err => {
                    console.error('Failed to load navigation:', err);
                });
        }

        // Load router script
        if (window.extensionRouter) {
            // Register routes
            window.extensionRouter.register('/', function() {
                // Default route: show 5-tab main page
                hideAllTabs();
                document.querySelector('.hero').style.display = 'none';
                document.querySelector('.features').style.display = 'none';
                document.querySelector('.pricing').style.display = 'none';
                document.querySelector('.final-cta').style.display = 'none';
                document.querySelector('.quiz-bank').style.display = 'block';
                showTab('practice');
                // Hide logo header
                const logoHeader = document.getElementById('introLogoHeader');
                if (logoHeader) logoHeader.classList.remove('show');
                // Show navigation
                const navContainer = document.getElementById('navigation-container');
                if (navContainer) navContainer.style.display = 'block';
            });

            // Product intro route (for upgrade flow)
            window.extensionRouter.register('intro', function() {
                hideAllTabs();
                // Show all product intro sections
                document.querySelector('.hero').style.display = 'block';
                document.querySelector('.features').style.display = 'block';
                document.querySelector('.pricing').style.display = 'block';
                document.querySelector('.final-cta').style.display = 'block';
                document.querySelector('.quiz-bank').style.display = 'none';
                // Show logo header
                const logoHeader = document.getElementById('introLogoHeader');
                if (logoHeader) logoHeader.classList.add('show');
                // Hide navigation
                const navContainer = document.getElementById('navigation-container');
                if (navContainer) navContainer.style.display = 'none';
            });

            window.extensionRouter.register('practice', function() {
                hideAllTabs();
                document.querySelector('.hero').style.display = 'none';
                document.querySelector('.features').style.display = 'none';
                document.querySelector('.pricing').style.display = 'none';
                document.querySelector('.final-cta').style.display = 'none';
                document.querySelector('.quiz-bank').style.display = 'block';
                showTab('practice');
                // Hide logo header
                const logoHeader = document.getElementById('introLogoHeader');
                if (logoHeader) logoHeader.classList.remove('show');
                // Show navigation
                const navContainer = document.getElementById('navigation-container');
                if (navContainer) navContainer.style.display = 'block';
            });

            window.extensionRouter.register('flashcards', function() {
                hideAllTabs();
                document.querySelector('.hero').style.display = 'none';
                document.querySelector('.features').style.display = 'none';
                document.querySelector('.pricing').style.display = 'none';
                document.querySelector('.final-cta').style.display = 'none';
                document.querySelector('.quiz-bank').style.display = 'block';
                showTab('flashcards');
                // Hide logo header
                const logoHeader = document.getElementById('introLogoHeader');
                if (logoHeader) logoHeader.classList.remove('show');
                // Show navigation
                const navContainer = document.getElementById('navigation-container');
                if (navContainer) navContainer.style.display = 'block';
            });

            window.extensionRouter.register('progress', function() {
                hideAllTabs();
                document.querySelector('.hero').style.display = 'none';
                document.querySelector('.features').style.display = 'none';
                document.querySelector('.pricing').style.display = 'none';
                document.querySelector('.final-cta').style.display = 'none';
                document.querySelector('.quiz-bank').style.display = 'block';
                showTab('progress');
                // Hide logo header
                const logoHeader = document.getElementById('introLogoHeader');
                if (logoHeader) logoHeader.classList.remove('show');
                // Show navigation
                const navContainer = document.getElementById('navigation-container');
                if (navContainer) navContainer.style.display = 'block';
            });

            window.extensionRouter.register('admin', function() {
                hideAllTabs();
                document.querySelector('.hero').style.display = 'none';
                document.querySelector('.features').style.display = 'none';
                document.querySelector('.pricing').style.display = 'none';
                document.querySelector('.final-cta').style.display = 'none';
                document.querySelector('.quiz-bank').style.display = 'block';
                showTab('admin');
                // Hide logo header
                const logoHeader = document.getElementById('introLogoHeader');
                if (logoHeader) logoHeader.classList.remove('show');
                // Show navigation
                const navContainer = document.getElementById('navigation-container');
                if (navContainer) navContainer.style.display = 'block';
            });

            window.extensionRouter.register('subscription', function() {
                // Navigate to subscription page or show subscription section
                if (window.location.pathname.includes('index.html')) {
                    showSection('subscription');
                } else {
                    window.location.href = 'index.html#/subscription';
                }
            });

            // Handle initial route
            const currentRoute = window.extensionRouter.getCurrentRoute();
            if (currentRoute) {
                window.extensionRouter.handleHashChange();
            }
        } else {
            // Load router script if not already loaded
            const routerScript = document.createElement('script');
            routerScript.src = chrome?.runtime?.getURL ? chrome.runtime.getURL('extension/scripts/router.js') : '../scripts/router.js';
            routerScript.onload = function() {
                setTimeout(initializeRouter, 100);
            };
            document.head.appendChild(routerScript);
        }
    }

    function showSection(sectionId) {
        // This function is kept for compatibility but routing now handles visibility directly
        const targetSection = document.querySelector(`.${sectionId}`);
        if (targetSection) {
            targetSection.style.display = 'block';
        }
    }

    function showTab(tabName) {
        const tabButtons = document.querySelectorAll('.quiz-tab');
        const tabContents = document.querySelectorAll('.quiz-tab-content');
        
        tabButtons.forEach(btn => {
            if (btn.getAttribute('data-tab') === tabName) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        tabContents.forEach(content => {
            if (content.id === `${tabName}-tab`) {
                content.classList.add('active');
            } else {
                content.classList.remove('active');
            }
        });
    }

    function hideAllTabs() {
        const tabContents = document.querySelectorAll('.quiz-tab-content');
        tabContents.forEach(content => {
            content.classList.remove('active');
        });
        const tabButtons = document.querySelectorAll('.quiz-tab');
        tabButtons.forEach(btn => {
            btn.classList.remove('active');
        });
    }

    // Initialize on DOM ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeRouter);
    } else {
        initializeRouter();
    }
</script>
</body>
</html>
</html>