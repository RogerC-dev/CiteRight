<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ç£æ³•å¾‹æ¡ˆè™Ÿæ¸¬è©¦é é¢ - Real Web Data Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        .test-section {
            background: #ecf0f1;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .case-link {
            background-color: #e3f2fd;
            color: #1976d2;
            padding: 2px 6px;
            border-radius: 4px;
            text-decoration: none;
            border: 1px dashed #1976d2;
            cursor: pointer;
            font-weight: bold;
        }
        .case-link:hover {
            background-color: #bbdefb;
            border-style: solid;
        }
        .api-test {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #2980b9; }
        #results {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å°ç£æ³•å¾‹æ¡ˆè™Ÿæ¸¬è©¦é é¢ ğŸ“š</h1>
        <p><strong>ç›®çš„ï¼š</strong>æ¸¬è©¦æ³•æºæ¢æ¸¬å™¨åœ¨çœŸå¯¦ç¶²é ç’°å¢ƒä¸­è­˜åˆ¥å’Œè™•ç†å°ç£æ³•å¾‹æ¡ˆè™Ÿçš„èƒ½åŠ›ï¼Œä½¿ç”¨çœŸå¯¦è³‡æ–™è€Œéåƒ…æ¨¡æ“¬è³‡æ–™ã€‚</p>

        <div class="status info">
            <strong>ä¼ºæœå™¨ç‹€æ…‹ï¼š</strong> <span id="serverStatus">æª¢æŸ¥ä¸­...</span>
            <button onclick="checkServerHealth()">æª¢æŸ¥ä¼ºæœå™¨</button>
            <button onclick="testRealDataEndpoint()">æ¸¬è©¦çœŸå¯¦è³‡æ–™ç«¯é»</button>
        </div>
    </div>

    <div class="container">
        <h2>ğŸ“‹ æ¸¬è©¦æ¡ˆä¾‹ 1ï¼šä¸€èˆ¬æ°‘äº‹åˆ¤æ±º</h2>
        <div class="test-section">
            <p>æœ€é«˜æ³•é™¢æ–¼<strong>110å¹´åº¦å°ä¸Šå­—ç¬¬1234è™Ÿ</strong>åˆ¤æ±ºä¸­èªç‚ºï¼Œç•¶äº‹äººå°æ–¼å¥‘ç´„æ¢æ¬¾ä¹‹è§£é‡‹æ‡‰ä»¥èª ä¿¡åŸå‰‡ç‚ºæº–ã€‚
            å¦åƒè¦‹<strong>109å¹´åº¦å°ä¸Šå­—ç¬¬5678è™Ÿ</strong>åˆ¤æ±ºåŠ<strong>111å¹´åº¦å°ä¸Šå­—ç¬¬9012è™Ÿ</strong>åˆ¤æ±ºã€‚</p>

            <p>å°ç£é«˜ç­‰æ³•é™¢<strong>110å¹´åº¦ä¸Šå­—ç¬¬3456è™Ÿ</strong>åˆ¤æ±ºäº¦æŒç›¸åŒè¦‹è§£ï¼Œä¸¦èˆ‡å°åŒ—åœ°æ–¹æ³•é™¢
            <strong>109å¹´åº¦è¨´å­—ç¬¬7890è™Ÿ</strong>åˆ¤æ±ºæ„æ—¨ä¸€è‡´ã€‚</p>
        </div>
    </div>

    <div class="container">
        <h2>âš–ï¸ æ¸¬è©¦æ¡ˆä¾‹ 2ï¼šæ†²æ³•æ³•åº­åˆ¤æ±º</h2>
        <div class="test-section">
            <p>æ†²æ³•æ³•åº­<strong>111å¹´æ†²åˆ¤å­—ç¬¬13è™Ÿ</strong>åˆ¤æ±ºå®£å‘Šç›¸é—œæ³•æ¢é•æ†²ï¼Œæ­¤åˆ¤æ±ºå½±éŸ¿æ·±é ã€‚
            å¦å¯åƒè€ƒ<strong>110å¹´æ†²åˆ¤å­—ç¬¬8è™Ÿ</strong>åˆ¤æ±ºä¹‹è¦‹è§£ã€‚</p>

            <p>æ­¤å¤–ï¼Œ<strong>112å¹´æ†²åˆ¤å­—ç¬¬5è™Ÿ</strong>åˆ¤æ±ºé€²ä¸€æ­¥é—¡é‡‹ç›¸é—œæ†²æ³•åŸå‰‡ã€‚</p>
        </div>
    </div>

    <div class="container">
        <h2>ğŸ“œ æ¸¬è©¦æ¡ˆä¾‹ 3ï¼šå¤§æ³•å®˜è§£é‡‹</h2>
        <div class="test-section">
            <p>å¤§æ³•å®˜<strong>é‡‹å­—ç¬¬748è™Ÿ</strong>è§£é‡‹ç¢ºç«‹åŒæ€§å©šå§»ä¹‹æ†²æ³•åœ°ä½ã€‚ç›¸é—œè§£é‡‹å°šåŒ…æ‹¬
            <strong>é‡‹å­—ç¬¬554è™Ÿ</strong>ã€<strong>é‡‹å­—ç¬¬626è™Ÿ</strong>ç­‰ã€‚</p>

            <p><strong>é‡‹å­—ç¬¬809è™Ÿ</strong>è§£é‡‹å‰‡é‡å°åˆ‘äº‹è¨´è¨Ÿç¨‹åºæå‡ºé‡è¦è¦‹è§£ã€‚</p>
        </div>
    </div>

    <div class="container">
        <h2>ğŸ”§ æ¸¬è©¦æ¡ˆä¾‹ 4ï¼šæ··åˆæ ¼å¼</h2>
        <div class="test-section">
            <p>ç¶œåˆåƒè€ƒ<strong>æ°‘åœ‹110å¹´åº¦å°ä¸Šå­—ç¬¬2468è™Ÿ</strong>åˆ¤æ±ºã€<strong>111å¹´æ†²åˆ¤å­—ç¬¬7è™Ÿ</strong>åˆ¤æ±ºï¼Œ
            ä»¥åŠ<strong>é‡‹å­—ç¬¬755è™Ÿ</strong>è§£é‡‹ï¼Œå¯çŸ¥ç›¸é—œæ³•ç†ç™¼å±•è„ˆçµ¡ã€‚</p>

            <p>æœ€é«˜è¡Œæ”¿æ³•é™¢<strong>110å¹´åº¦åˆ¤å­—ç¬¬135è™Ÿ</strong>åˆ¤æ±ºèˆ‡æ™ºæ…§è²¡ç”¢æ³•é™¢
            <strong>109å¹´åº¦æ°‘å°ˆä¸Šå­—ç¬¬24è™Ÿ</strong>åˆ¤æ±ºäº¦å€¼å¾—åƒè€ƒã€‚</p>
        </div>
    </div>

    <div class="container">
        <h2>ğŸŒ çœŸå¯¦è³‡æ–™ API æ¸¬è©¦</h2>
        <div class="api-test">
            <h3>æ‰‹å‹•æ¸¬è©¦ç‰¹å®šæ¡ˆè™Ÿ</h3>
            <p>å¹´åº¦ï¼š<input type="text" id="testYear" value="110" placeholder="110"></p>
            <p>å­—åˆ¥ï¼š<input type="text" id="testCaseType" value="å°ä¸Š" placeholder="å°ä¸Š"></p>
            <p>æ¡ˆè™Ÿï¼š<input type="text" id="testNumber" value="1234" placeholder="1234"></p>
            <button onclick="testSpecificCase()">æ¸¬è©¦æ­¤æ¡ˆè™Ÿ</button>
        </div>

        <div id="results"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000/api';

        // Check server health
        async function checkServerHealth() {
            const statusEl = document.getElementById('serverStatus');
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                statusEl.innerHTML = `âœ… æ­£å¸¸é‹è¡Œ (å¿«å–: ${data.cacheSize} ç­†, é‹è¡Œæ™‚é–“: ${Math.floor(data.uptime)}ç§’)`;
                statusEl.className = 'success';
            } catch (error) {
                statusEl.innerHTML = `âŒ ç„¡æ³•é€£æ¥ä¼ºæœå™¨ - ${error.message}`;
                statusEl.className = 'error';
            }
        }

        // Test real data endpoint
        async function testRealDataEndpoint() {
            const resultsEl = document.getElementById('results');
            resultsEl.innerHTML = '<p>ğŸ”„ æ¸¬è©¦çœŸå¯¦è³‡æ–™ç«¯é»...</p>';

            try {
                const response = await fetch(`${API_BASE}/test-real-data`);
                const data = await response.json();

                let html = '<h3>ğŸ“Š çœŸå¯¦è³‡æ–™æ¸¬è©¦çµæœ</h3>';
                html += `<p><strong>ç¸½è¨ˆï¼š</strong>${data.summary.total} å€‹æ¡ˆä¾‹</p>`;
                html += `<p><strong>æœ‰çœŸå¯¦è³‡æ–™ï¼š</strong>${data.summary.withRealData} å€‹</p>`;
                html += `<p><strong>æœ‰å¢å¼·è³‡æ–™ï¼š</strong>${data.summary.withEnhancement} å€‹</p>`;

                html += '<h4>è©³ç´°çµæœï¼š</h4>';
                data.testResults.forEach(result => {
                    html += `<div class="status ${result.error ? 'error' : 'info'}">`;
                    html += `<strong>${result.case}</strong><br>`;
                    if (result.error) {
                        html += `âŒ éŒ¯èª¤: ${result.error}`;
                    } else {
                        html += `ğŸ“Š ä¿¡å¿ƒåº¦: ${result.confidence}<br>`;
                        html += `ğŸ” çœŸå¯¦è³‡æ–™: ${result.hasRealData ? 'âœ…' : 'âŒ'}<br>`;
                        html += `ğŸš€ å¢å¼·è³‡æ–™: ${result.hasEnhancement ? 'âœ…' : 'âŒ'}<br>`;
                        if (result.sources.length > 0) {
                            html += `ğŸ“š è³‡æ–™ä¾†æº: ${result.sources.join(', ')}`;
                        }
                    }
                    html += '</div>';
                });

                resultsEl.innerHTML = html;
            } catch (error) {
                resultsEl.innerHTML = `<div class="status error">âŒ æ¸¬è©¦å¤±æ•—: ${error.message}</div>`;
            }
        }

        // Test specific case
        async function testSpecificCase() {
            const year = document.getElementById('testYear').value;
            const caseType = document.getElementById('testCaseType').value;
            const number = document.getElementById('testNumber').value;
            const resultsEl = document.getElementById('results');

            if (!year || !caseType || !number) {
                resultsEl.innerHTML = '<div class="status error">âŒ è«‹å¡«å…¥æ‰€æœ‰æ¬„ä½</div>';
                return;
            }

            resultsEl.innerHTML = '<p>ğŸ”„ æŸ¥è©¢ä¸­...</p>';

            try {
                const url = `${API_BASE}/case?year=${encodeURIComponent(year)}&caseType=${encodeURIComponent(caseType)}&number=${encodeURIComponent(number)}`;
                const response = await fetch(url);
                const data = await response.json();

                let html = '<h3>ğŸ“‹ æ¡ˆè™ŸæŸ¥è©¢çµæœ</h3>';
                html += `<div class="status ${data.error ? 'error' : 'success'}">`;

                if (data.error) {
                    html += `âŒ ${data.error}`;
                } else {
                    html += `<strong>æ¡ˆè™Ÿï¼š</strong>${year}å¹´åº¦${caseType}å­—ç¬¬${number}è™Ÿ<br>`;
                    html += `<strong>è³‡æ–™ä¾†æºï¼š</strong>${data.source || 'æœªçŸ¥'}<br>`;
                    html += `<strong>ä¿¡å¿ƒåº¦ï¼š</strong>${data.confidence || 'æœªçŸ¥'}<br>`;
                    html += `<strong>åˆ¤æ±ºè¦æ—¨ï¼š</strong>${data.summary || 'ç„¡å¯ç”¨æ‘˜è¦'}<br>`;
                    html += `<strong>ç›¸é—œæ³•æ¢ï¼š</strong>${data.relevantLaws || 'ç„¡ç›¸é—œæ³•æ¢'}<br>`;
                    if (data.backgroundInfo) {
                        html += `<strong>èƒŒæ™¯è³‡è¨Šï¼š</strong>${data.backgroundInfo}<br>`;
                    }
                    if (data.sourceUrl) {
                        html += `<strong>æŸ¥è©¢é€£çµï¼š</strong><a href="${data.sourceUrl}" target="_blank">é»æ­¤æŸ¥çœ‹å®˜æ–¹è³‡æ–™</a><br>`;
                    }
                    if (data.realDataSources && data.realDataSources.length > 0) {
                        html += `<strong>çœŸå¯¦è³‡æ–™ä¾†æºï¼š</strong>${data.realDataSources.join(', ')}<br>`;
                    }
                }

                html += '</div>';
                html += '<h4>å®Œæ•´ JSON å›æ‡‰ï¼š</h4>';
                html += `<pre>${JSON.stringify(data, null, 2)}</pre>`;

                resultsEl.innerHTML = html;
            } catch (error) {
                resultsEl.innerHTML = `<div class="status error">âŒ æŸ¥è©¢å¤±æ•—: ${error.message}</div>`;
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkServerHealth();
            console.log('ğŸš€ æ³•æºæ¢æ¸¬å™¨æ¸¬è©¦é é¢å·²è¼‰å…¥');
            console.log('ğŸ“‹ é é¢åŒ…å«å¤šç¨®å°ç£æ³•å¾‹æ¡ˆè™Ÿæ ¼å¼ä¾›æ¸¬è©¦');
            console.log('ğŸŒ å¯æ¸¬è©¦çœŸå¯¦è³‡æ–™ API æ•´åˆåŠŸèƒ½');
        });
    </script>
</body>
</html>

